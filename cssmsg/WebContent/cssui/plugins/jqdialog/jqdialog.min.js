/**
 * CssDialog & $jqDialog v1.0 2017.6 by CSS WangWeidong
 * 
 * modal.js from bootstrap3.3.x
 * 
 */(function(b){var f=function(d,a){this.options=a;this.$body=b(document.body);this.$element=b(d);this.$dialog=this.$element.find(".modal-dialog");this.isShown=null;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,b.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};f.VERSION="3.3.7";f.TRANSITION_DURATION=300;f.DEFAULTS={keyboard:!0,show:!0};f.prototype.toggle=function(b){return this.isShown?this.hide():this.show(b)};f.prototype.show=function(d){var a=this,g=b.Event("show.bs.modal",{relatedTarget:d});this.$element.trigger(g);if(!this.isShown&&!g.isDefaultPrevented()){this.isShown=!0;this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss\x3d"modal"]',b.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){a.$element.one("mouseup.dismiss.bs.modal",function(a){})});var c=b.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(a.$body);a.$element.show().scrollTop(0);c&&a.$element[0].offsetWidth;a.$element.addClass("in");a.enforceFocus();g=b.Event("shown.bs.modal",{relatedTarget:d});c?a.$dialog.one("bsTransitionEnd",function(){a.$element.trigger("focus").trigger(g)}).emulateTransitionEnd(f.TRANSITION_DURATION):a.$element.trigger("focus").trigger(g)}};f.prototype.hide=function(d){d&&d.preventDefault();d=b.Event("hide.bs.modal");this.$element.trigger(d);this.isShown&&!d.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),b(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),b.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",b.proxy(this.hideModal,this)).emulateTransitionEnd(f.TRANSITION_DURATION):this.hideModal())};f.prototype.enforceFocus=function(){b(document).off("focusin.bs.modal").on("focusin.bs.modal",b.proxy(function(b){document===b.target||this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.trigger("focus")},this))};f.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",b.proxy(function(b){27==b.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};f.prototype.resize=function(){if(this.isShown)b(window).on("resize.bs.modal",b.proxy(this.handleUpdate,this));else b(window).off("resize.bs.modal")};f.prototype.hideModal=function(){this.$element.hide();this.$body.removeClass("modal-open");this.resetAdjustments();this.$element.trigger("hidden.bs.modal")};f.prototype.handleUpdate=function(){};f.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};b.fn.modal=function(d,a){return this.each(function(){var g=b(this),c=g.data("bs.modal"),e=b.extend({},f.DEFAULTS,g.data(),"object"==typeof d&&d);c||g.data("bs.modal",c=new f(this,e));if("string"==typeof d)c[d](a);else e.show&&c.show(a)})};b.fn.modal.Constructor=f})(jQuery);(function(b){var f=function(a){this.defaults={id:uuid(),title:"\u89c6\u7a97",content:'\x3cdiv class\x3d"ui_loading"\x3e\x3cspan\x3eloading...\x3c/span\x3e\x3c/div\x3e',showHeader:!0,showFooter:!0,showEffect:"fade",cssClass:"",btnStyle:"btn-default btn-sm",btnClose:!0,draggable:!0,top:.382,backdrop:!1,keyboard:!0,onshown:null,onshow:null,maxHeight:null,width:null,height:null,buttons:[],data:{}};this.draggableData={isMouseDown:!1,mouseOffset:{}};this.options=b.extend(this.defaults,a)};f.prototype={init:function(){this.createModal();this.createDialog();this.createMask();this.createContent();this.createHeader();this.createBody();this.createFooter();this.getModal().append(this.getDialog()).append(this.getMask());isIE6&&(this.createIE6frame(),this.getModal().append(this.getIE6frame()));this.getDialog().append(this.getContent());this.getContent().append(this.getHeader()).append(this.getBody()).append(this.getFooter())},createModal:function(){this.$modal=b('\x3cdiv class\x3d"modal jqmodal" role\x3d"dialog" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e\x3c/div\x3e');this.$modal.prop("id",this.getId());isnull(this.getCssClass())||this.$modal.addClass(this.getCssClass());isnull(this.options.showEffect)||this.$modal.addClass(this.options.showEffect)},getModal:function(){return this.$modal},createDialog:function(){this.$modalDialog=b('\x3cdiv class\x3d"modal-dialog"\x3e\x3c/div\x3e')},getDialog:function(){return this.$modalDialog},createMask:function(){this.$modalMask=b('\x3cdiv class\x3d"modal-mask"\x3e\x3c/div\x3e')},getMask:function(){return this.$modalMask},createIE6frame:function(){this.$modalMask=b('\x3ciframe frameborder\x3d"0" src\x3d"about:blank" style\x3d"position:absolute;z-index:-1;width:100%;top:0px;left:0px;filter:progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')},getIE6frame:function(){return this.$modalMask},createContent:function(){this.$modalContent=b('\x3cdiv class\x3d"modal-content"\x3e\x3c/div\x3e')},getContent:function(){return this.$modalContent},createHeader:function(){this.$modalHeader=this.options.showHeader?b('\x3cdiv class\x3d"modal-header"\x3e\x3c/div\x3e'):b("")},getHeader:function(){return this.$modalHeader},createBody:function(){this.$modalBody=b('\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e')},getBody:function(){return this.$modalBody},createFooter:function(){this.$modalFooter=this.options.showFooter?b('\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e'):b("")},getFooter:function(){return this.$modalFooter},getId:function(){return this.options.id},getCssClass:function(){return this.options.cssClass},getButtons:function(){return this.options.buttons},setButtons:function(a){this.options.buttons=a},addButton:function(a){this.options.buttons.push(a)},addButtons:function(a){var g=this;b.each(a,function(a,b){g.addButton(b)})},getTitle:function(){return this.$modalTitle},getTitleInfo:function(){return this.$modalTitle.html()},setTitle:function(a){a=isnull(a)?"\u89c6\u7a97":a;this.options.title=a;this.getTitle().html(a)},setContent:function(a){this.options.content=a;this.getBody().html(a)},createHeaderContent:function(){if(this.options.showHeader){if(this.options.btnClose){var a=b('\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e');this.getHeader().append(a)}this.$modalTitle=b('\x3ch4 class\x3d"modal-title"\x3e\x3c/h4\x3e');this.getHeader().append(this.$modalTitle);this.setTitle(this.options.title)}},createBodyContent:function(){this.setContent(this.options.content)},createFooterContent:function(){if(this.options.showFooter){var a=this;b.each(a.options.buttons,function(g,c){var e=b('\x3cbutton class\x3d"btn"\x3e\x3c/button\x3e');a.getFooter().append(e);isnull(c.label)?e.append(dealNull(c.icon)+" "+dealNull(c.name)):e.append(c.label);isnull(c.title)||e.attr("title",c.title);isnull(c.cssClass)?e.addClass(a.options.btnStyle):e.addClass(c.cssClass);isnull(c.data)||b.each(c.data,function(a,b){e.attr(a,b)});c.action&&e.click(function(){c.action.call(this,a)})})}},resizeSimple:function(){var a=(b(window).height()-this.getContent().height()-80)*this.options.top,g=.5*(b(window).width()-this.getContent().width());0>a&&(a=0);0>g&&(g=0);this.getDialog().css({left:px(g),top:px(a)});isnull(this.options.height)&&(isnull(this.options.maxHeight)&&(this.options.maxHeight=b(window).height()-60),this.getBody().css({"max-height":px(this.options.maxHeight)}))},resize:function(){var a=this;isIE6||isIE7?(this.getDialog().css("width",px(this.getBody()[0].scrollWidth+20)),setTimeout(function(){a.resizeSimple()},0)):a.resizeSimple()},initEvent:function(){var a=this;a.getModal().modal({backdrop:a.options.backdrop,keyboard:a.options.keyboard});a.getModal().on("hide.bs.modal",function(){$jqdialog.remove(a.getId());b(this).remove()});if(!isnull(a.options.onshow))a.getModal().on("show.bs.modal",function(){a.options.onshow(a)});if(!isnull(a.options.onshown))a.getModal().on("shown.bs.modal",function(){a.options.onshown(a)});isnull(a.options.width)||this.getBody().css({width:px(a.options.width)});isnull(a.options.height)||this.getBody().css({height:px(a.options.height)});a.resizeSimple();a.draggable()},draggable:function(){this.options.draggable&&(this.getHeader().css("cursor","move"),this.getHeader().addClass("draggable").on("mousedown",{dialog:this},function(a){var b=a.data.dialog;b.draggableData.isMouseDown=!0;var c=b.getDialog().offset();b.draggableData.mouseOffset={top:a.clientY-c.top,left:a.clientX-c.left}}),this.getModal().on("mouseup mouseleave",{dialog:this},function(a){a.data.dialog.draggableData.isMouseDown=!1}),b("body").on("mousemove",{dialog:this},function(a){var b=a.data.dialog;b.draggableData.isMouseDown&&b.getDialog().offset({top:a.clientY-b.draggableData.mouseOffset.top,left:a.clientX-b.draggableData.mouseOffset.left})}));return this},close:function(){this.getModal().modal("hide")},show:function(){this.init();this.createHeaderContent();this.createBodyContent();this.createFooterContent();this.initEvent();this.getModal().modal("show");return this}};var d={};$jqdialog={show:function(a){a=(new f(a)).show();delete d[a.getId()];d[a.getId()]=a;$navTab.options.shownCallback&&$navTab.options.shownCallback.call(this,a.getBody());a.resize();return a},getTopId:function(){var a="";for(tmpKey in d)a=tmpKey;return a},getDialogById:function(a){return d[a]},getTopDialog:function(a){a=$jqdialog.getTopId();return d[a]},remove:function(a){delete d[a]},closeById:function(a){d[a].close()},closeAll:function(){b.each(d,function(a,b){b.close()})},closeTop:function(){var a=$jqdialog.getTopId();isnull(a)||$jqdialog.closeById(a)},getButton:function(a,b,c){var e={};switch(a){case "\u5173\u95ed":case "\u53d6\u6d88":e.label='\x3ci class\x3d"fa fa-close"\x3e\x3c/i\x3e '+a;break;case "\u4fdd\u5b58":e.cssClass="btn-primary btn-sm";e.label='\x3ci class\x3d"fa fa-save"\x3e\x3c/i\x3e '+a;break;case "\u786e\u5b9a":e.cssClass="btn-primary btn-sm",e.label='\x3ci class\x3d"fa fa-check"\x3e\x3c/i\x3e '+a}e.action=function(a){b&&b.call(this,a);"undefined"!=typeof c&&1!=c||a.close()};return e},getButtonNotClose:function(a,b){return $jqdialog.getButton(a,b,!1)},alert:function(a,b){$jqdialog.show({title:"\u63d0\u793a",cssClass:"alert_dialog",content:'\x3cdiv class\x3d"dialogIcon"\x3e\x3ci class\x3d"fa fa-info-circle"\x3e\x3c/i\x3e \x3c/div\x3e'+a,buttons:[$jqdialog.getButton("\u5173\u95ed",b)]})},confirm:function(a,b,c){$jqdialog.show({title:"\u786e\u8ba4",cssClass:"confirm_dialog",content:'\x3cdiv class\x3d"dialogIcon"\x3e\x3ci class\x3d"fa fa-question-circle"\x3e\x3c/i\x3e \x3c/div\x3e'+a,buttons:[$jqdialog.getButton("\u786e\u5b9a",b),$jqdialog.getButton("\u53d6\u6d88",c)]})},open:function(a){var g,c,e,d,f,k,m,l=null;if(a instanceof jQuery){g=dealNull(a.attr("href"));c=dealNull(a.attr("title"));e=dealNull(a.attr("rel"));f=dealNull(a.attr("width"));k=dealNull(a.attr("height"));d="";var n=a.parents("form").first(),l=uuid();n.attr("data-wwd-formid",l)}else"string"===typeof a?(g=a,d=e=c=""):(g=dealNull(a.url),c=dealNull(a.title),e=dealNull(a.rel),d=dealNull(a.data),m=a.callback?a.callback:null,f=dealNull(a.width),k=dealNull(a.height));isnull(e)&&(e=uuid());if(g.isExternalUrl())var h=$jqdialog.show({id:e,title:c,cssClass:"iframe_"+e,content:'\x3ciframe src\x3d"'+g+'" class\x3d"modal-frame" frameborder\x3d"no" border\x3d"0" marginwidth\x3d"0" marginheight\x3d"0"\x3e\x3c/iframe\x3e',showFooter:!1});else c={id:e,title:c,showFooter:!1},isnull(f)||(c.width=f),isnull(k)||(c.height=k),h=$jqdialog.show(c),b.ajax({url:g,data:d,type:"POST",cache:!1,success:function(c){h.getBody().html(c);null!=l&&(c=h.getBody().find("form")[0],b(c).attr("data-wwd-srcformid",l));c=b("#"+e+" .set-btn");isnull(c)||c.css({"padding-top":"15px","padding-right":"15px","margin-top":"15px","margin-left":"-15px","margin-right":"-15px","border-top":"1px solid #f4f4f4"});$navTab.options.shownCallback&&$navTab.options.shownCallback.call(this,h.getBody());h.resize();null!=m&&m(a)}});return!1},tip:function(a,b){var c=$jqdialog.show({content:'\x3cdiv class\x3d"dialogIcon"\x3e\x3ci class\x3d"fa fa-check-circle-o"\x3e\x3c/i\x3e \x3c/div\x3e'+a,cssClass:"tip_dialog",showHeader:!1,showFooter:!1});setTimeout(function(){c.close()},isnull(b)?1500:b)}}})(jQuery);