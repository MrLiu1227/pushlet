(function(b){b.fn.slwColor=function(a){a=new SlwPlugins.SlwColor(this,a);a.init();return a};SlwPlugins.SlwColor=function(a,d){this.version="SlwColor v2.0";this.defaults={color:"#000000",bgColor:!0,cssStyle:"slw-color-btn",lang:1,onClose:null};this.option=b.extend(this.defaults,d);this.el=b(a)};SlwPlugins.SlwColor.prototype={init:function(){var a=this;0!=a.el.length&&(a.el.addClass(this.option.cssStyle),a.el.each(function(){var d=b(this);d.attr("readonly","readonly");d.css("cursor","pointer");a.initColor(d);d.unbind("click.slwColor");d.on("click.slwColor",function(){a.show(d)})}))},isShow:function(){return $SlwColorPanel.isLoad?$SlwColorPanel.panel.is(":visible"):!1},focus:function(a){this.isShow()?this.hide():this.show(a)},show:function(a){$SlwColorPanel.show(a,this.option)},hide:function(){$SlwColorPanel.hide()},testColor:function(a){return $SlwColorPanel.testColor(a,this.option)},initColor:function(a){$SlwColorPanel.initColor(a,this.option)}};SlwPlugins.SlwColorPanel=function(){this.isLoad=!1;this.inputObj;this.clear='\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e';this.space='\x3cdiv class\x3d"spacebar"\x3e\x3c/div\x3e';this.data={theme:["Theme Colors\x3e\x3e","\u4e3b\u9898\u989c\u8272\x3e\x3e"],stand:["Standard Colors","\u6807\u51c6\u989c\u8272"],close:["Close","\u5173\u95ed"]};this.option};SlwPlugins.SlwColorPanel.prototype={show:function(a,d){this.inputObj=a;this.option=d;var c=this;c.isLoad||(c.isLoad=!0,c.panel=b('\x3cdiv class\x3d"slw-color"\x3e\x3c/div\x3e'),b("body").append(c.panel),c.drawTop(),c.drawBody(),c.drawLess(),c.drawMore(),c.drawBottom(),c.initEvent());c.initText();c.setValue();var e=c.inputObj.offset(),f=e.top+c.inputObj.outerHeight()+1;f+this.panel.outerHeight()>b(window).height()&&(f=e.top-this.panel.outerHeight());e=e.left;e+this.panel.outerWidth()>b(window).width()&&(e=b(window).width()-this.panel.outerWidth()-20);c.panel.css({left:e+"px",top:f+"px"});c.panel.show();b(document).unbind("mousedown.slwColorPanel");b(document).bind("mousedown.slwColorPanel",function(a){Slw.Event.onElement(a,c.panel[0])||Slw.Event.onElement(a,c.inputObj[0])||c.hide()})},hide:function(){this.isLoad&&(this.panel.hide(),b.isFunction(this.option.onClose)&&this.option.onClose.apply(this))},testColor:function(a,b){b||(b=this.option);a=a.toUpperCase();return Slw.Valid.test("color",a)?a:b.color},initColor:function(a,b){var c=this.testColor(a.val(),b);a.val(c);b.bgColor?a.css({"background-color":c,color:Slw.Color.basicColor(c)}):a.css("background-color","#FFFFFF");return c},setValue:function(){var a=this.initColor(this.inputObj,this.option);this.cur.css("background-color",a);this.curText.html(a)},initText:function(){var a=this.option;this.theme.html(this.data.theme[a.lang]);this.standard.html(this.data.stand[a.lang]);this.close.html(this.data.close[a.lang])},initEvent:function(){var a=this;a.theme.click(function(){b(".lessDiv,.moreDiv").toggle()});b("li",a.body).hover(function(){var d=b(this).attr("rel").toUpperCase();a.pre.css("background-color",d);a.preText.html(d)}).click(function(){a.inputObj.val(b(this).attr("rel"));a.setValue();a.hide()});a.close.click(function(){a.hide()})},drawArray:function(a,b){for(var c="",d=0;d<a.length;d++){var f="";b&&(10>d?f=' class\x3d"topLi"':39<d&&(f=' class\x3d"bottomLi"'));c+='\x3cli rel\x3d"#'+a[d]+'"'+f+' style\x3d"background-color:#'+a[d]+'"\x3e\x3c/li\x3e'}return c},drawTop:function(){this.theme=b('\x3ca href\x3d"javascript:;" class\x3d"theme"\x3e\x3c/a\x3e');this.close=b('\x3ca href\x3d"javascript:;"\x3e\x3c/a\x3e');this.panel.append(this.theme).append(this.close).append(this.clear)},drawBody:function(){this.body=b('\x3cdiv class\x3d"body"\x3e\x3c/div\x3e');this.panel.append(this.body)},drawLess:function(){this.lessDiv=b('\x3cdiv class\x3d"lessDiv"\x3e\x3c/div\x3e');this.c1=b("\x3cul\x3e\x3c/ul\x3e");this.c1.append(this.drawArray("ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646".split(" ")));this.c2=b('\x3cul class\x3d"c2"\x3e\x3c/ul\x3e');this.c2.append(this.drawArray("f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806".split(" "),!0));this.standard=b("\x3cdiv\x3e\x3c/div\x3e");this.c3=b("\x3cul\x3e\x3c/ul\x3e");this.c3.append(this.drawArray("c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0".split(" ")));this.lessDiv.append(this.c1).append(this.space).append(this.c2).append(this.clear).append(this.standard).append(this.c3).append(this.space);this.body.append(this.lessDiv)},drawMore:function(){this.moreDiv=b('\x3cdiv class\x3d"moreDiv"\x3e\x3c/div\x3e');var a=["003366 336699 3366cc 003399 000099 0000cc 000066".split(" "),"006666 006699 0099cc 0066cc 0033cc 0000ff 3333ff 333399".split(" "),"669999 009999 33cccc 00ccff 0099ff 0066ff 3366ff 3333cc 666699".split(" "),"339966 00cc99 00ffcc 00ffff 33ccff 3399ff 6699ff 6666ff 6600ff 6600cc".split(" "),"339933 00cc66 00ff99 66ffcc 66ffff 66ccff 99ccff 9999ff 9966ff 9933ff 9900ff".split(" "),"006600 00cc00 00ff00 66ff99 99ffcc ccffff ccccff cc99ff cc66ff cc33ff cc00ff 9900cc".split(" "),"003300 009933 33cc33 66ff66 99ff99 ccffcc ffffff ffccff ff99ff ff66ff ff00ff cc00cc 660066".split(" "),"333300 009900 66ff33 99ff66 ccff99 ffffcc ffcccc ff99cc ff66cc ff33cc cc0099 993399".split(" "),"336600 669900 99ff33 ccff66 ffff99 ffcc99 ff9999 ff6699 ff3399 cc3399 990099".split(" "),"666633 99cc00 ccff33 ffff66 ffcc66 ff9966 ff6666 ff0066 d60094 993366".split(" "),"a58800 cccc00 ffff00 ffcc00 ff9933 ff6600 ff0033 cc0066 660033".split(" "),"996633 cc9900 ff9900 cc6600 ff3300 ff0000 cc0000 990033".split(" "),"663300 996600 cc3300 993300 990000 800000 993333".split(" ")];this.c4=b('\x3cdiv class\x3d"moreUl"\x3e\x26nbsp;\x3c/div\x3e');for(var d=0;d<a.length;d++)this.c4.append('\x3cul style\x3d"clear:both" class\x3d"mul'+d+'"\x3e'+this.drawArray(a[d])+"\x3c/ul\x3e");this.moreDiv.append(this.c4).append(this.space);this.body.append(this.moreDiv)},drawBottom:function(){this.footer=b('\x3cdiv class\x3d"footer"\x3e\x3c/div\x3e');this.cur=b('\x3cdiv class\x3d"cur"\x3e\x3c/div\x3e');this.curText=b('\x3cdiv class\x3d"curText"\x3e\x3c/div\x3e');this.pre=b('\x3cdiv class\x3d"pre"\x3e\x3c/div\x3e');this.preText=b('\x3cdiv class\x3d"preText"\x3e#FFFFFF\x3c/div\x3e');this.footer.append(this.cur).append(this.curText).append(this.pre).append(this.preText);this.panel.append(this.footer);if(6==Slw.Utils.ieVersion()){var a=b('\x3ciframe id\x3d"slw-color-frm" hideFocus\x3d"true" frameborder\x3d"0" src\x3d"about:blank" style\x3d"position:absolute;z-index:-1;width:100%;top:0px;left:0px;filter:progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e');a.css("height",this.panel.height()+"px");this.panel.append(a)}}};$SlwColorPanel=new SlwPlugins.SlwColorPanel})(jQuery);