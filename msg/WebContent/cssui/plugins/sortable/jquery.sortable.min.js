/* HTML5 Sortable (http://farhadi.ir/projects/html5sortable)
 * Released under the MIT license.
 */
!function(t){var e,i=t();t.fn.sortable=function(s){var a=String(s);return s=t.extend({connectWith:!1},s),this.each(function(){if(/^enable|disable|destroy$/.test(a)){var n=t(this).children(t(this).data("items")).attr("draggable","enable"==a);return void("destroy"==a&&n.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var r,d,h=/^ul|ol$/i.test(this.tagName)?"li":"div",n=t(this).children(s.items),o=t("<"+h+' class="sortable-placeholder">');n.find(s.handle).mousedown(function(){r=!0}).mouseup(function(){r=!1}),t(this).data("items",s.items),i=i.add(o),s.connectWith&&t(s.connectWith).add(this).data("connectWith",s.connectWith),n.attr("draggable","true").on("dragstart.h5s",function(i){if(_that=this,s.handle&&!r)return!1;r=!1;var a=i.originalEvent.dataTransfer;a.effectAllowed="move",a.setData("Text","dummy"),d=(e=t(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){e.removeClass("sortable-dragging").show(),i.detach(),d!=e.index()&&n.parent().trigger("sortupdate",{item:e}),e=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(a){return n.is(e)||s.connectWith===t(e).parent().data("connectWith")?"drop"==a.type?(a.stopPropagation(),i.filter(":visible").after(e),!1):(a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="move",n.is(this)?(s.forcePlaceholderSize&&o.height(e.outerHeight()),e.hide(),o.css("width",t(this).css("width")),o.css("height",t(this).css("height")),o.css("margin",t(this).css("margin")),o.css("padding",t(this).css("padding")),t(this)[o.index()<t(this).index()?"after":"before"](o),i.not(o).detach()):i.is(this)||t(this).children(s.items).length||(i.detach(),t(this).append(o)),!1):!0})})}}(jQuery);